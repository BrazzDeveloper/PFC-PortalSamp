#include <YSI_Coding\y_hooks>

new Float:gObjectsPositions[][][] =
{
	{
		{294.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -138.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -136.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -134.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -132.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -130.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -128.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -126.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	},
	{
		{294.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{292.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{290.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{288.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{286.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{284.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{282.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000},
		{280.83914, -124.76210, 1006.95007, 90.00000, 0.00000, 90.00000}
	}
};

new Float:gCabinPositions[][] =
{
	{300.0891, -138.5000, 1004.0625, 90.0000},
	{300.0891, -137.0000, 1004.0625, 90.0000},
	{300.0891, -135.5000, 1004.0625, 90.0000},
	{300.0891, -134.0000, 1004.0625, 90.0000},
	{300.0891, -132.5000, 1004.0625, 90.0000},
	{300.0891, -131.0000, 1004.0625, 90.0000},
	{300.0891, -129.5000, 1004.0625, 90.0000},
	{300.0891, -128.0000, 1004.0625, 90.0000}
};

static gWeapons[][][] = {
	{ WEAPON_COLT45,	1,	100,	"Colt45" },
	{ WEAPON_DEAGLE,	1,	150,	"Desert Eagle"}
};

new 
	bool:gIsPlayerInShootingRange[MAX_PLAYERS],
	gPlayerShootingRangeStage[MAX_PLAYERS],
	gPlayerShootingRangeCabin[MAX_PLAYERS],
	gPlayerRemainingCabin[MAX_PLAYERS],
	bool:gIsPlayerInMovingStage[MAX_PLAYERS],
	gPlayerShootingRangeObjects[MAX_PLAYERS][8],
	gShootingRangePlayerCount = 0,
	gPlayerBulletsShot[MAX_PLAYERS],
	gPlayerBulletsHit[MAX_PLAYERS],
	gPlayerWeaponTraining[MAX_PLAYERS]
;

static bool:gIsDialogVisible[MAX_PLAYERS];

OnShootingRangeStart(playerid, cabin, stageid)
{
	if(stageid == sizeof(gObjectPositions[]))
	{
		SendClientMessage(playerid, COR_BRANCO, "| SKILL | VocÃª finalizou seu treino e {"COR_VERDE_INC"}melhorou {ffffff}as habilitades com essa arma.");
		SetCameraBehindPlayer(playerid);

		// ..

		new Float:ratio = floatmul(floatdiv(gPlayerBulletsHit[playerid], gPlayerBulletsShot[playerid]), 100.0);
		new perfomance[16];

		if ( ratio < 30.0)
		{
			SetPlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid], GePlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid]) + 50);
			perfomance = "{"COR_VERMELHO_INC"}Ruim";
		}
		else if ( ratio > 31.0 && ratio < 66.0)
		{
			SetPlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid], GePlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid]) + 100);
			perfomance = "{"COR_LARANJA_INC"}Mediana";
		}
		else if ( ratio > 65.0)
		{
			SetPlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid], GePlayerWeaponSkill(playerid, gPlayerWeaponTraining[playerid]) + 100);
			perfomance = "{"COR_VERDE_INC"}Boa";
		}

		SendClientMessage(playerid, -1, "| TREINO | %d acertos, %d erros. Porcent. de acertos: %.2f%%%%, Porcent. de erros: %.2f%%%%. Perfomance: %s", gPlayerBulletsHit[playerid], gPlayerBulletsShot[playerid]-gPlayerBulletsHit[playerid], ratio, 100.0-ratio, perfomance);
		
	}
}